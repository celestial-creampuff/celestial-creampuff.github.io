---
title: "[AWS] EC2 만들기"
date: 2023-07-03 00:00:00 -0400
categories: AWS VPC
tags:
    - AWS
    - EC2
toc: true
toc_sticky: true
---

## 학습목표

이번 게시물을 통한 목표는 아래와 같습니다!

1. AWS 콘솔에서 기본적인 사용법과 UI를 익힙니다.
2. EC2에 대해 기본적인 내용을 알고 말할 수 있습니다.
3. EC2를 직접 구성할 수 있습니다.

## EC2란?
EC2(Elastic Compute Cloud)란 아마존 웹 서비스(AWS)에서 제공하는 클라우드 컴퓨팅 서비스입니다. 우리는 이 컴퓨팅 서비스를 통해서 서버, 스토리지, 데이터베이스 등의 컴퓨팅 서비스를 사용할 수 있어요.

EC2를 통해서 우리는 온프레미스의 서버처럼 초기 구입 비용과 구성하는데 비용이 없으며, 사용한 만큼만 과금이 됩니다.
우리는 콘솔에서 클릭 한 번만으로도 바로 서버를 띄울 수 있으며 삭제 또한 클릭 한 번으로 서버를 없앨 수 있어요.

또한 아래의 특징을 가지고 있습니다.
1. 요구사항에 맞게 컴퓨팅 파워를 조정 가능
2. 원하는 용도에 맞게 서버를 구성할 수 있으며 다른 AWS 리소스와 연동 가능
3. 실제 사용한 만큼 비용 지불(온디맨드)
4. OS 선택이 가능하며, 짧은 시간안에 컴퓨터를 수많게 배포 가능


## EC2 만들기

먼저 EC2 콘솔에 접속하기 위해 상단 돋보기에서 EC2를 검색합니다.
그리고 서비스에서 EC2를 클릭해주세요.
![EC2 콘솔 접속](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-43-17.png)


EC2 대시보드에 접속하였습니다.
이제 인스턴스 시작을 아래와 같이 클릭하여 EC2를 생성할 수 있어요.
![인스턴스 시작](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-44-05.png)


저의 경우 아래와 같이
인스턴스 이름 : test-server
AMI : Amazon Linux 2023 AMI
를 선택하였습니다. (이건 기본적으로 선택되어 있어요.)
![기본 구성](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-45-10.png)


이제 EC2에 접속하기 위한 키 페어가 필요합니다. 

키 페어를 통한 접속으로 보안적으로 EC2 인스턴스 서버에 접속할 수 있어요.
우리는 현재 키 페어가 없기 때문에 새 키 페어 생성을 클릭해서 만들어줍니다.
![키페어 생성](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-45-33.png)


키 페어 이름은 아래와 같이 구성하였습니다.
키 페어 이름 : test-key

키 페어 유형 : RSA

프라이빗 키 파일 형식 : .pem

(만약 서버 접속 도구를 Putty만을 사용한다면 .ppk를 하셔도 무방합니다!)
그리고 하단의 키 페어 생성을 클릭해주세요.
![키페어 구성](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-45-50.png)


Chrome 브라우저의 경우 아래와 같이 메모장 형식의 키 페어 파일이 다운로드 받아지는 것을 볼 수 있어요.

키 페어 파일이 있는 곳의 경로가 어딘지 잘 봐주길 바라요!

![키페어 확인](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-46-24.png)


다음은 EC2가 위치할 VPC와 네트워크를 구성해야 합니다.

저는 아래와 같이 기본적으로 만들어진 서브넷에 아래와 같은 구성으로 네트워크 설정을 하였습니다.

여기서 보안 그룹 규칙은 SSh 유횽의 22번 포트로 모든 IP가 들어올 수 있도록 만들었어요.

(해당 핸즈온은 테스트이기 때문에 아래와 같이 구성하였지만 실제 워크로드에 배치되었다면 보안적으로 매우 위험해요. 따라서 그 때는 허용하는 조건에 맞게 유형과 프로토콜, 포트 범위, 소스 유형을 변경해야 합니다!)

![네트워크 및 보안그룹 구성](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-48-34.png)


스토리지 구성은 기본적인 8GiB에 맞췄습니다.

그리고 인스턴스 시작을 클릭합니다.

![스토리지 구성 및 인스턴스 시작](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-48-54.png)


성공적으로 인스턴스를 시작했음을 알 수 있어요. 좌측 하단의 모든 인스턴스 보기를 클릭하면

![스토리지 구성 및 인스턴스 시작](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-49-30.png)


자신이 현재 만들었던 인스턴스를 볼 수 있습니다.

또한 아래의 세부 정보, 보안, 네트워킹 등등의 메뉴를 통해 인스턴스가 가지고 있는 정보과 상태 등을 알 수가 있습니다!

![인스턴스 만들기 완료!](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-10-50-16.png)


Windows 사용자의 경우, 키보드에서 Windows 키를 눌러 아래와 같이 **터미널** 을 입력합니다! 그리고 우측 버튼을 눌러 관리자 권한으로 실행 해주세요!

![터미널 접속](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-14-38-57.png)


그리고 아래 명령어를 따라 경로와 접속을 합니다.

```javascript
### C:\ 폴더로 이롱
cd C:\

### Windows OpenSSH가 있는 폴더로 이동
cd .\Windows\System32\OpenSSH\

### SSh의 유무와 버전을 확인
ssh -V

### ssh -i를 통한 서버 접속 | ()은 생략하고 적어주세요! 그리고 Amazon Linux는 기본적으로 ec2-user를 통해 들어갑니다.
ssh -i (접속할 키 페어 파일의 위치와 키 파일까지 명시) ec2-user@(접속할 공인 IP)

위의 명령어를 아래와 같은 예시로 들 수 있어요.
ssh -i C:\Users\rmi\Downloads\test-key.pem ec2-user@107.23.249.56

이후에 Are you sure you want to continue connecting (yes/no/[fingerprint])? 이 뜬다면 (yes) 입력

이후
Warning: Permanently added '107.23.249.56' (ED25519) to the list of known hosts.
   ,     #_
   ~\_  ####_        Amazon Linux 2023
  ~~  \_#####\
  ~~     \###|
  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~' '->
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/'
[ec2-user@ip-172-31-35-220 ~]$

위와 같이 뜬다면 접속이 성공한겁니다!

```


위 과정을 캡쳐로 떴을 때는 아래와 같아요!

![터미널 접속 화면](/assets/2023-07-03-EC2_%EC%83%9D%EC%84%B1_%EB%B0%8F_%EC%A0%91%EC%86%8D%EB%B0%A9%EB%B2%95/2023-07-03-17-37-50.png)

