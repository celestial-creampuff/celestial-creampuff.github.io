---
title[test]: "[AWS] EC2의 Log 파일 경로"
date: 2023-07-01 00:00:00 -0400
categories: AWS VPC
tags:
    - AWS
    - EC2
toc: true
toc_sticky: true
---

memo

[AWS] EC2의 로그 보는 방법


Log란?
- 컴퓨터 안에서의 이용 또는 처리 기록을 시간의 흐름에 맞춰 기록한 것입니다.
- 즉, 로그는 시스템 상에서 일어난 모든 사건을 기록해주는 존재라고 할 수 있어요.
- 그리고 시스템 사에서 "Log(로그)"를 생성하는 과정을 "Logging(로깅)"이라고 부릅니다.
로그는 시스템 또는 응용 프로그램에서 발생하는 이벤트, 활동, 오류 등의 기록을 의미합니다. 그리고 그러한 정보들을 기록하는 용도로 사용되며 동작이나 문제의 식별에 대해 도움을 줄 수 있어요.


Log를 봄으로써 사용자와 서버의 활동기록을 볼 수 있고, 시스템 공격, 서버 장애 등을 파악할 수 있습니다. 로그를 통해 우리는 시스템적으로 장애가 나거나 공격을 받았을 때 행위자가 누구인지, 원인이 무엇인지 파악할 수 있어요.


이번 Hands-On에는 Amazon-Linux의 OS를 사용하는 EC2에서 Log의 경로를 보는 방법을 설명하겠습니다.


기본적으로 Amazon Linux도 기존 리눅스와 동일하게 /var/log에 로그를 기록합니다.
아래 사진과 같이 경로로 들어갈 수 있어요



Amazon Linux EC2 인스턴스의 로그는 일반적으로 다음과 같은 경로에 저장됩니다:

시스템 로그:

/var/log/messages: 일반적인 시스템 메시지 및 이벤트 로그
/var/log/syslog: 시스템 로그
/var/log/auth.log: 인증과 관련된 로그 (로그인 시도, sudo 사용 등)
/var/log/secure: 인증과 관련된 로그 (로그인 시도, sudo 사용 등)
/var/log/boot.log: 부팅 시스템 로그
애플리케이션 로그:

웹 서버 (Apache, Nginx)의 로그 경로: /var/log/httpd/, /var/log/nginx/
데이터베이스 (MySQL, PostgreSQL)의 로그 경로: /var/log/mysql/, /var/log/postgresql/
애플리케이션 특정 로그는 해당 애플리케이션의 설치 및 구성에 따라 다를 수 있습니다.
로그 파일을 읽기 위해 다음과 같은 명령을 사용할 수 있습니다:

cat: 로그 파일 전체를 출력합니다. 예: cat /var/log/messages
tail: 로그 파일의 끝 부분을 출력합니다. 주로 실시간으로 로그를 모니터링할 때 사용됩니다. 예: tail -f /var/log/syslog
less 또는 more: 로그 파일을 페이지 단위로 출력하며, 스크롤하거나 검색할 수 있습니다. 예: less /var/log/auth.log
로그 파일은 보안상의 이유로 루트 권한이 필요할 수 있으므로 sudo 명령과 함께 사용해야 할 수도 있습니다.

위의 경로는 일반적인 예시일 뿐이며, 실제 경로는 EC2 인스턴스의 운영 체제와 구성에 따라 다를 수 있습니다. 로그 파일의 경로와 구성은 해당 서비스 및 애플리케이션의 설치 및 설정에 따라 달라질 수 있으므로, 사용 중인 서비스와 애플리케이션에 대한 문서를 참조하시기 바랍니다.


아래는 /var/log 디렉토리 내의 파일과 폴더에 대한 설명입니다:

amazon: AWS EC2 인스턴스에서 사용되는 Amazon 관련 로그 파일이 저장된 디렉토리입니다. 예를 들어 amazon/ecs-init.log는 Amazon ECS 에이전트의 초기화 로그를 포함할 수 있습니다.

audit: Linux 시스템 감사 로그 파일이 저장된 디렉토리입니다. 시스템에서 발생하는 중요한 이벤트 및 작업에 대한 로그가 기록될 수 있습니다.

btmp: 부팅 시스템에 대한 로그인 실패 기록을 포함하는 파일입니다.

chrony: 시스템 시간 동기화 서비스인 Chrony의 로그 파일이 저장된 디렉토리입니다.

cloud-init-output.log: 클라우드 인스턴스 초기화 작업 중 발생하는 출력(log)이 기록된 파일입니다. 클라우드 인스턴스 초기화는 인스턴스 시작 시 인스턴스 설정 및 구성을 자동화하는 프로세스입니다.

cloud-init.log: 클라우드 인스턴스 초기화 작업의 로그 파일로, 클라우드 인스턴스 초기화에 대한 자세한 정보와 진행 상황이 기록됩니다.

dnf.librepo.log: DNF(Dandified Yum) 패키지 관리자에서 사용되는 라이브러리 저장소 로그 파일입니다.

dnf.log: DNF(Dandified Yum) 패키지 관리자의 작업(log)이 기록된 파일입니다. 패키지 설치, 업데이트, 제거 등의 작업에 대한 정보가 포함될 수 있습니다.

dnf.rpm.log: DNF(Dandified Yum) 패키지 관리자에서 수행되는 RPM 패키지 관련 작업(log)이 기록된 파일입니다.

hawkey.log: DNF(Dandified Yum) 패키지 관리자의 하위 라이브러리인 Hawkey의 로그 파일입니다. 패키지 검색, 의존성 해결 등의 작업에 대한 정보가 포함될 수 있습니다.

journal: systemd-journald를 통해 수집된 시스템 로그가 저장된 디렉토리입니다. 다양한 로그 파일과 로그 메시지가 포함되어 있습니다.

lastlog: 마지막으로 로그인한 사용자에 대한 정보가 저장된 파일입니다. 사용자의 마지막 로그인 시간과 관련 정보를 포함할 수 있습니다.

private: 특정 프로세스, 서비스 또는 응용 프로그램에 의해 생성된 개인 데이터와 관련된 로그 파일이 저장된 디렉토리입니다.

sa: SAR(System Activity Reporter)에 의해 수집된 시스템 활동 데이터가 저장된 디렉토리입니다. 성능 모니터링과 통계를 위해 사용됩니다.

sssd: System Security Services Daemon(SSSD)의 로그 파일이 저장된 디렉토리입니다. SSSD는 Linux 시스템의 사용자 인증, 권한 관리 및 액세스 제어를 담당합니다.

tallylog: 실패한 로그인 시도 및 계정 잠금에 대한 정보가 저장된 파일입니다.

wtmp: 사용자 로그인 및 로그아웃 이벤트에 대한 정보가 기록된 파일입니다.

위의 파일 및 폴더는 일반적으로 Linux 시스템의 로그 파일이며, 시스템 상태 및 작동에 대한 다양한 정보를 제공합니다. 로그 파일은 시스템 관리, 문제 해결, 보안 감사 등에 유용하게 사용될 수 있습니다


위의 출력은 Linux 시스템에서 로그 파일과 디렉토리를 보여주는 명령어인 ls -l의 결과입니다. 로그 파일과 디렉토리의 각 열에 대한 설명은 다음과 같습니다:

첫 번째 열: 파일/디렉토리의 퍼미션(permission) 정보를 나타냅니다. 예를 들어 drwxr-xr-x는 디렉토리이며, 소유자에 대해 읽기, 쓰기, 실행 권한이 있고, 그룹과 다른 사용자에게는 읽고 실행할 권한이 있는 것을 의미합니다.
두 번째 열: 소유자(owner)를 나타냅니다. 위의 예시에서는 모두 root입니다.
세 번째 열: 소유 그룹(group)을 나타냅니다. 위의 예시에서는 대부분 root입니다.
네 번째 열: 파일 또는 디렉토리의 크기를 바이트 단위로 나타냅니다.
다섯 번째 열: 파일 또는 디렉토리의 최종 수정 날짜와 시간을 표시합니다.
여섯 번째 열: 파일 또는 디렉토리의 이름을 나타냅니다.

로그 파일은 시스템 상황을 모니터링하고 문제 해결을 위한 정보를 제공합니다. 위의 로그 파일은 예시이며, 실제 시스템에서는 다양한 로그 파일이 있을 수 있습니다. 로그 파일의 내용과 구체적인 용도는 해당 로그 파일의 목적에 따라 다를 수 있으므로, 필요한 로그를 살펴보고 분석하는 것이 중요합니다.